<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apple TV+ — Premium Streaming</title>
    
    <!-- Apple-esque Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;500;600;700&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        :root {
            --apple-blue: #0071e3;
            --apple-dark: #000000;
            --apple-glass: rgba(22, 22, 23, 0.8);
            --apple-text: #f5f5f7;
            --apple-gray: #86868b;
            --border-glass: rgba(255, 255, 255, 0.15);
            --ease: cubic-bezier(0.4, 0, 0.2, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-font-smoothing: antialiased; }
        
        body { 
            background-color: var(--apple-dark); 
            color: var(--apple-text); 
            font-family: 'SF Pro Display', 'Inter', -apple-system, sans-serif;
            overflow-x: hidden;
        }

        /* Apple TV+ Sleek Navigation */
        nav {
            height: 48px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: saturate(180%) blur(20px);
            display: flex; align-items: center; justify-content: center;
            position: fixed; top: 0; width: 100%; z-index: 2000;
            border-bottom: 0.5px solid var(--border-glass);
        }

        .nav-links { display: flex; gap: 30px; }
        .nav-links a {
            color: var(--apple-text); text-decoration: none;
            font-size: 12px; font-weight: 400; opacity: 0.8;
            transition: opacity 0.3s;
        }
        .nav-links a:hover { opacity: 1; }

        .header-main {
            height: 64px;
            background: transparent;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 40px;
            margin-top: 48px;
            position: relative; z-index: 1000;
        }

        .apple-logo { font-size: 24px; color: #fff; text-decoration: none; font-weight: 600; letter-spacing: -1px; }
        
        .header-actions { display: flex; align-items: center; gap: 24px; }
        .header-actions a { color: #fff; text-decoration: none; opacity: 0.8; transition: 0.3s; }
        .header-actions a:hover { opacity: 1; transform: scale(1.1); }

        /* Hero Section */
        .hero-section {
            position: relative;
            width: 100%;
            height: 85vh;
            display: flex; align-items: flex-end;
            padding-bottom: 100px;
            overflow: hidden;
        }

        .hero-bg {
            position: absolute; inset: 0;
            background-size: cover; background-position: center 20%;
            transition: transform 2s var(--ease);
            z-index: 1;
        }

        .hero-overlay {
            position: absolute; inset: 0;
            background: linear-gradient(to top, #000 5%, rgba(0,0,0,0.4) 40%, transparent 100%);
            z-index: 2;
        }

        .hero-content {
            position: relative; z-index: 3;
            padding: 0 60px;
            max-width: 800px;
            animation: fadeInUp 1s var(--ease);
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .badge-atv {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            padding: 4px 12px; border-radius: 4px;
            font-size: 10px; font-weight: 700; letter-spacing: 1px;
            margin-bottom: 15px; display: inline-block;
        }

        .movie-title {
            font-size: 4rem; font-weight: 700; letter-spacing: -2px;
            margin-bottom: 5px; line-height: 1;
        }

        .tv-episode-label {
            font-size: 1.5rem; font-weight: 500; color: var(--apple-blue);
            margin-bottom: 20px; display: block;
        }

        .meta-info {
            display: flex; align-items: center; gap: 15px;
            color: var(--apple-gray); font-size: 15px; margin-bottom: 30px;
        }

        .btn-group { display: flex; gap: 15px; }
        
        .btn-apple-primary {
            background: #fff; color: #000;
            padding: 14px 32px; border-radius: 8px;
            font-weight: 600; font-size: 15px; text-decoration: none;
            display: flex; align-items: center; gap: 10px;
            transition: 0.2s;
        }
        .btn-apple-primary:hover { background: #e8e8ed; transform: scale(1.02); }

        .btn-apple-secondary {
            background: rgba(255,255,255,0.15); color: #fff;
            backdrop-filter: blur(20px);
            padding: 14px 32px; border-radius: 8px;
            font-weight: 600; font-size: 15px; text-decoration: none;
            transition: 0.2s;
        }
        .btn-apple-secondary:hover { background: rgba(255,255,255,0.25); }

        /* Full Screen Player Interface */
        .player-modal {
            position: fixed; inset: 0;
            background: #000; z-index: 3000;
            display: none; flex-direction: column;
        }

        .player-top-bar {
            padding: 30px 40px; display: flex; justify-content: space-between;
            position: absolute; top: 0; width: 100%; z-index: 10;
        }

        .close-player { font-size: 24px; cursor: pointer; opacity: 0.6; transition: 0.3s; }
        .close-player:hover { opacity: 1; }

        .player-core {
            flex: 1; display: flex; align-items: center; justify-content: center;
            position: relative; cursor: pointer;
        }

        .loader-ring {
            width: 60px; height: 60px;
            border: 3px solid rgba(255,255,255,0.1);
            border-top-color: #fff; border-radius: 50%;
            animation: spin 1s linear infinite;
            display: none;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        /* Apple Control Bar */
        .apple-controls {
            position: absolute; bottom: 0; left: 0; right: 0;
            padding: 40px; background: linear-gradient(transparent, rgba(0,0,0,0.8));
            display: flex; flex-direction: column; gap: 20px;
        }

        .scrubber-container {
            height: 4px; background: rgba(255,255,255,0.2);
            border-radius: 2px; position: relative; cursor: pointer;
        }
        .scrubber-fill { height: 100%; background: #fff; width: 0%; border-radius: 2px; }

        .control-row { display: flex; align-items: center; justify-content: space-between; }
        .playback-tools { display: flex; align-items: center; gap: 30px; font-size: 20px; }
        .tool-btn { cursor: pointer; opacity: 0.8; transition: 0.2s; }
        .tool-btn:hover { opacity: 1; transform: scale(1.1); }

        /* CPA Modal Apple Style */
        .apple-cpa-modal {
            position: fixed; inset: 0;
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(30px);
            z-index: 4000; display: none;
            align-items: center; justify-content: center;
        }

        .apple-card {
            background: #1c1c1e;
            width: 90%; max-width: 400px;
            padding: 40px; border-radius: 24px;
            text-align: center; border: 1px solid var(--border-glass);
            animation: cardScale 0.5s var(--ease);
        }

        @keyframes cardScale { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        .apple-card h2 { font-size: 24px; font-weight: 700; margin-bottom: 12px; }
        .apple-card p { color: var(--apple-gray); font-size: 15px; margin-bottom: 30px; line-height: 1.5; }
        
        .btn-confirm {
            background: var(--apple-blue); color: #fff;
            padding: 16px; border-radius: 12px;
            width: 100%; display: block; text-decoration: none;
            font-weight: 600; font-size: 16px; margin-bottom: 12px;
        }

        /* Content Shelves */
        .shelf { padding: 40px 60px; }
        .shelf-title { font-size: 20px; font-weight: 600; margin-bottom: 20px; }

        .movie-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        .poster-card {
            position: relative; border-radius: 12px; overflow: hidden;
            aspect-ratio: 16/9; cursor: pointer;
            transition: transform 0.4s var(--ease);
        }
        .poster-card:hover { transform: scale(1.05); z-index: 10; }
        .poster-img { width: 100%; height: 100%; background-size: cover; background-position: center; }

        @media (max-width: 768px) {
            .hero-content { padding: 0 30px; }
            .movie-title { font-size: 2.5rem; }
            .shelf { padding: 40px 20px; }
            .movie-grid { grid-template-columns: repeat(2, 1fr); }
            .nav-links { display: none; }
        }
    </style>
</head>
<body>

<nav>
    <div class="nav-links">
        <a href="YOUR_OFFER_LINK_HERE">Search</a>
        <a href="YOUR_OFFER_LINK_HERE">Home</a>
        <a href="YOUR_OFFER_LINK_HERE">Apple TV+</a>
        <a href="YOUR_OFFER_LINK_HERE">MLS Season Pass</a>
        <a href="YOUR_OFFER_LINK_HERE">Store</a>
        <a href="YOUR_OFFER_LINK_HERE">Library</a>
    </div>
</nav>

<header class="header-main">
    <a href="#" class="apple-logo"><i class="fab fa-apple"></i> tv+</a>
    <div class="header-actions">
        <a href="YOUR_OFFER_LINK_HERE"><i class="fas fa-search"></i></a>
        <a href="YOUR_OFFER_LINK_HERE"><i class="fas fa-user-circle" style="font-size: 24px;"></i></a>
    </div>
</header>

<section class="hero-section">
    <div class="hero-bg" id="heroImg"></div>
    <div class="hero-overlay"></div>
    
    <div class="hero-content">
        <div class="badge-atv">APPLE TV+ ORIGINAL</div>
        <h1 class="movie-title" id="mainTitle">LOADING...</h1>
        <span class="tv-episode-label" id="epLabel"></span>
        
        <div class="meta-info" id="metaInfo">
            <span id="yearVal">2024</span>
            <span style="border: 1px solid #555; padding: 0 4px; border-radius: 2px; font-size: 10px;">4K HDR</span>
            <span>Dolby Vision</span>
            <span id="genreVal">Thriller</span>
        </div>
        
        <div class="btn-group">
            <a href="javascript:void(0)" class="btn-apple-primary" onclick="openPlayer()">
                <i class="fas fa-play"></i> Play Now
            </a>
            <a href="YOUR_OFFER_LINK_HERE" class="btn-apple-secondary">
                <i class="fas fa-plus"></i> Add to Up Next
            </a>
        </div>
    </div>
</section>

<!-- Player Interface -->
<div class="player-modal" id="playerContainer">
    <div class="player-top-bar">
        <div class="close-player" onclick="closePlayer()"><i class="fas fa-chevron-left"></i></div>
        <div id="playerTitle" style="font-weight: 600; text-align: center;">Movie Title</div>
        <div style="width: 24px;"></div>
    </div>

    <div class="player-core" onclick="triggerCPA()">
        <div class="loader-ring" id="loader"></div>
        <div id="bigPlayIcon" style="font-size: 60px; opacity: 0.8;"><i class="fas fa-play"></i></div>
    </div>

    <div class="apple-controls">
        <div class="scrubber-container"><div class="scrubber-fill" id="pFill"></div></div>
        <div class="control-row">
            <div class="playback-tools">
                <i class="fas fa-undo-alt tool-btn"></i>
                <i class="fas fa-play tool-btn"></i>
                <i class="fas fa-redo-alt tool-btn"></i>
            </div>
            <div class="playback-tools" style="font-size: 16px;">
                <i class="fas fa-closed-captioning tool-btn"></i>
                <i class="fas fa-volume-up tool-btn"></i>
                <i class="fas fa-expand tool-btn"></i>
            </div>
        </div>
    </div>
</div>

<!-- CPA Modal -->
<div class="apple-cpa-modal" id="cpaModal">
    <div class="apple-card">
        <i class="fab fa-apple" style="font-size: 40px; margin-bottom: 20px;"></i>
        <h2>Sign in with Apple ID</h2>
        <p>Sign in or create a new account to continue watching this 4K content across all your devices.</p>
        <a href="YOUR_OFFER_LINK_HERE" class="btn-confirm">Sign In Now</a>
        <a href="#" class="btn-apple-secondary" style="background: transparent; border: none;" onclick="closeCPA()">Cancel</a>
    </div>
</div>

<div class="shelf">
    <h2 class="shelf-title">More to Watch</h2>
    <div class="movie-grid" id="recGrid"></div>
</div>

<footer style="padding: 60px; text-align: center; border-top: 1px solid var(--border-glass); opacity: 0.5; font-size: 12px;">
    <p>© 2026 Apple Inc. All rights reserved.</p>
    <div style="margin-top: 20px; display: flex; justify-content: center; gap: 20px;">
        <a href="YOUR_OFFER_LINK_HERE" style="color:#fff; text-decoration:none">Privacy Policy</a>
        <a href="YOUR_OFFER_LINK_HERE" style="color:#fff; text-decoration:none">Terms of Use</a>
        <a href="YOUR_OFFER_LINK_HERE" style="color:#fff; text-decoration:none">Cookies</a>
    </div>
</footer>

<script>
    const API_KEY = '22be462e6d3de1dbab03d1ca50847b5a';
    const OFFER_LINK = "YOUR_OFFER_LINK_HERE"; // Replace with your CPA link
    
    let contentId, contentType, seasonNum, episodeNum;

    function parseURL() {
        const path = window.location.pathname.split('/').filter(Boolean);
        // Supports: /tv/66732/2/1 or ?id=66732&type=tv&s=2&e=1
        if (path[0] === 'tv') {
            contentType = 'tv';
            contentId = path[1];
            seasonNum = path[2];
            episodeNum = path[3];
        } else if (path[0] === 'movie') {
            contentType = 'movie';
            contentId = path[1];
        } else {
            const urlParams = new URLSearchParams(window.location.search);
            contentId = urlParams.get('id') || '823464';
            contentType = urlParams.get('type') || 'movie';
            seasonNum = urlParams.get('s');
            episodeNum = urlParams.get('e');
        }
    }

    async function init() {
        parseURL();
        try {
            const response = await fetch(`https://api.themoviedb.org/3/${contentType}/${contentId}?api_key=${API_KEY}`);
            const data = await response.json();
            
            const title = data.title || data.name;
            document.getElementById('mainTitle').innerText = title;
            document.getElementById('playerTitle').innerText = title;
            document.getElementById('yearVal').innerText = (data.release_date || data.first_air_date || '2024').split('-')[0];
            document.getElementById('genreVal').innerText = data.genres?.[0]?.name || 'Action';
            
            // Set Backdrop
            let backdrop = data.backdrop_path;
            
            // Handle TV specific logic for Episodes
            if (contentType === 'tv' && seasonNum && episodeNum) {
                const epRes = await fetch(`https://api.themoviedb.org/3/tv/${contentId}/season/${seasonNum}/episode/${episodeNum}?api_key=${API_KEY}`);
                const epData = await epRes.json();
                if (epData.name) {
                    document.getElementById('epLabel').innerText = `Season ${seasonNum}, Episode ${episodeNum}: ${epData.name}`;
                    document.getElementById('playerTitle').innerText = `${title} - S${seasonNum}:E${episodeNum}`;
                    if (epData.still_path) backdrop = epData.still_path;
                }
            }
            
            document.getElementById('heroImg').style.backgroundImage = `url('https://image.tmdb.org/t/p/original${backdrop}')`;
            loadRecommendations();
        } catch (e) { console.error(e); }
    }

    function openPlayer() {
        document.getElementById('playerContainer').style.display = 'flex';
        setTimeout(() => {
            document.getElementById('bigPlayIcon').style.display = 'none';
            document.getElementById('loader').style.display = 'block';
            setTimeout(triggerCPA, 2000);
        }, 500);
    }

    function closePlayer() {
        document.getElementById('playerContainer').style.display = 'none';
    }

    function triggerCPA() {
        document.getElementById('cpaModal').style.display = 'flex';
    }

    function closeCPA() {
        document.getElementById('cpaModal').style.display = 'none';
    }

    async function loadRecommendations() {
        const res = await fetch(`https://api.themoviedb.org/3/trending/all/day?api_key=${API_KEY}`);
        const data = await res.json();
        
        document.getElementById('recGrid').innerHTML = data.results.slice(0, 8).map(m => `
            <div class="poster-card" onclick="window.location.href='/${m.media_type}/${m.id}'">
                <div class="poster-img" style="background-image: url('https://image.tmdb.org/t/p/w500${m.backdrop_path}')"></div>
                <div style="padding: 10px; font-size: 13px; font-weight: 500;">${m.title || m.name}</div>
            </div>
        `).join('');
    }

    // Apply Offer Link to all matching anchors
    document.querySelectorAll('a[href="YOUR_OFFER_LINK_HERE"]').forEach(a => a.href = OFFER_LINK);

    init();
</script>
</body>
</html>
