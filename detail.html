<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JustWatch TV — Premium Sky Blue Experience</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Montserrat:wght@900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        :root {
            --sky-blue: #00d2ff;
            --sea-blue: #0077be;
            --bg-deep: #010613;
            --bg-surface: #0a1324;
            --text-main: #f0faff;
            --text-dim: #94a3b8;
            --border: rgba(0, 210, 255, 0.12);
            --ease: cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            background-color: var(--bg-deep); 
            color: var(--text-main); 
            font-family: 'Plus Jakarta Sans', sans-serif;
            overflow-x: hidden;
            line-height: 1.4;
        }

        /* Small Elegant Header */
        header {
            height: 48px; /* Compact height */
            background: rgba(1, 6, 19, 0.85);
            backdrop-filter: blur(25px);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 16px;
            border-bottom: 1px solid var(--border);
            position: sticky; top: 0; z-index: 1000;
        }

        .logo { display: flex; align-items: center; gap: 8px; text-decoration: none; }
        .logo-box {
            width: 24px; height: 24px;
            background: linear-gradient(135deg, var(--sea-blue), var(--sky-blue));
            border-radius: 6px; display: flex; align-items: center; justify-content: center;
        }
        .logo-text {
            font-family: 'Montserrat', sans-serif;
            font-size: 16px; letter-spacing: -0.5px;
            background: linear-gradient(to right, #fff, var(--sky-blue));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        /* Real Video Player Interface */
        .player-container {
            width: 100%;
            background: #000;
            position: relative;
            aspect-ratio: 16/9;
            overflow: hidden;
            display: flex; justify-content: center; align-items: center;
            cursor: pointer;
        }

        .player-backdrop {
            position: absolute; inset: 0;
            background-size: cover; background-position: center;
            transition: transform 0.8s var(--ease);
        }
        .player-container:hover .player-backdrop { transform: scale(1.05); }

        .player-overlay {
            position: absolute; inset: 0;
            background: linear-gradient(0deg, rgba(1, 6, 19, 0.9) 0%, transparent 50%, rgba(1, 6, 19, 0.4) 100%);
            z-index: 1;
        }

        /* Play Button Center */
        .center-play {
            position: relative; z-index: 10;
            width: 56px; height: 56px;
            background: rgba(0, 210, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 210, 255, 0.4);
            border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            color: white; font-size: 1.2rem;
            box-shadow: 0 0 30px rgba(0, 210, 255, 0.2);
            transition: var(--ease);
        }
        .player-container:hover .center-play { transform: scale(1.1); background: var(--sky-blue); color: #000; }

        /* Video Controls Footer (Real Look) */
        .video-controls {
            position: absolute; bottom: 0; left: 0; right: 0;
            height: 40px; z-index: 10;
            display: flex; align-items: center; padding: 0 12px; gap: 12px;
        }
        .progress-bar-bg {
            position: absolute; top: 0; left: 0; right: 0;
            height: 3px; background: rgba(255,255,255,0.15);
        }
        .progress-fill { width: 35%; height: 100%; background: var(--sky-blue); box-shadow: 0 0 10px var(--sky-blue); }

        .control-icon { font-size: 14px; color: var(--text-main); opacity: 0.9; }
        .time-label { 
            font-size: 11px; font-weight: 600; font-family: monospace; 
            color: var(--sky-blue); letter-spacing: 0.5px;
        }

        /* Mini Precise Pop-up */
        .mini-popup-overlay {
            position: absolute; inset: 0;
            background: rgba(1, 6, 19, 0.7);
            backdrop-filter: blur(8px);
            z-index: 100; display: none;
            align-items: center; justify-content: center;
        }
        .mini-card {
            background: var(--bg-surface);
            border: 1px solid var(--sky-blue);
            padding: 16px; border-radius: 16px;
            width: 220px; text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.6);
            animation: popIn 0.4s var(--ease);
        }
        @keyframes popIn { from { transform: scale(0.85); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        .mini-card h4 { font-size: 12px; font-weight: 800; margin-bottom: 6px; letter-spacing: 0.5px; }
        .mini-card p { font-size: 10px; color: var(--text-dim); margin-bottom: 14px; line-height: 1.3; }
        .btn-access {
            display: block; width: 100%; padding: 8px;
            background: linear-gradient(to right, var(--sea-blue), var(--sky-blue));
            color: white; text-decoration: none; border-radius: 8px;
            font-size: 10px; font-weight: 800; text-transform: uppercase;
        }

        /* Features Section Below Player */
        .meta-section { padding: 16px; text-align: center; }
        .content-title { 
            font-size: 1.25rem; font-weight: 800; margin-bottom: 4px; 
            background: linear-gradient(to right, #fff, var(--text-dim));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .content-tags { 
            font-size: 11px; color: var(--sky-blue); font-weight: 700; 
            opacity: 0.8; margin-bottom: 12px; display: block;
        }

        .features-grid {
            display: flex; justify-content: center; gap: 8px;
            margin-bottom: 24px; flex-wrap: wrap;
        }
        .feature-item {
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--border);
            padding: 6px 10px; border-radius: 8px;
            display: flex; align-items: center; gap: 6px;
            font-size: 10px; font-weight: 700; color: var(--text-dim);
            transition: 0.3s;
        }
        .feature-item i { color: var(--sky-blue); font-size: 12px; }
        .feature-item.active { border-color: var(--sky-blue); color: #fff; background: rgba(0, 210, 255, 0.05); }

        /* Smooth Selectors */
        .selector-area { padding: 0 16px; }
        .select-label { font-size: 10px; font-weight: 800; color: var(--sky-blue); text-transform: uppercase; margin-bottom: 6px; display: block; letter-spacing: 1px; }
        
        .select-input {
            background: var(--bg-surface); border: 1px solid var(--border);
            border-radius: 12px; padding: 12px 16px; margin-bottom: 12px;
            display: flex; align-items: center; justify-content: space-between;
            font-size: 13px; font-weight: 500; cursor: pointer;
            transition: 0.3s;
        }
        .select-input:hover { border-color: var(--sky-blue); background: #0e1a31; }

        .dropdown-list {
            background: var(--bg-surface); border: 1px solid var(--border);
            border-radius: 12px; margin-top: -8px; margin-bottom: 12px;
            display: none; max-height: 200px; overflow-y: auto;
        }
        .list-item { padding: 12px 16px; font-size: 13px; border-bottom: 1px solid rgba(255,255,255,0.03); }
        .list-item:hover { background: rgba(0, 210, 255, 0.1); color: var(--sky-blue); }

        /* Recommendation Grid */
        .rec-grid {
            display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px;
            padding: 0 16px 40px;
        }
        .rec-item { text-decoration: none; color: inherit; }
        .rec-thumb { 
            width: 100%; aspect-ratio: 2/3; border-radius: 6px;
            background-size: cover; background-position: center;
            border: 1px solid var(--border); transition: 0.3s;
        }
        .rec-item:hover .rec-thumb { border-color: var(--sky-blue); transform: translateY(-3px); }

        footer { text-align: center; padding: 30px; border-top: 1px solid var(--border); font-size: 10px; color: var(--text-dim); }
    </style>
</head>
<body>

<header>
    <a href="#" class="logo">
        <div class="logo-box"><i class="fas fa-play" style="font-size: 10px; color: #fff;"></i></div>
        <span class="logo-text">JUSTWATCH</span>
    </a>
    <i class="fas fa-search" style="color: var(--text-dim); font-size: 14px;"></i>
</header>

<div class="player-container" id="player" onclick="showAuth()">
    <div class="player-backdrop" id="backdrop"></div>
    <div class="player-overlay"></div>
    
    <div class="center-play" id="playBtn">
        <i class="fas fa-play" id="mainIcon"></i>
    </div>

    <!-- Precise Mini Popup -->
    <div class="mini-popup-overlay" id="authBox" onclick="event.stopPropagation()">
        <div class="mini-card">
            <i class="fas fa-gem" style="color: var(--sky-blue); font-size: 1.5rem; margin-bottom: 10px;"></i>
            <h4>PREMIUM ACCESS</h4>
            <p>Please log in or register for free to enjoy 4K Sky-HD streaming.</p>
            <a href="#" class="btn-access">START WATCHING</a>
        </div>
    </div>

    <!-- Real Video UI -->
    <div class="video-controls">
        <div class="progress-bar-bg"><div class="progress-fill"></div></div>
        <i class="fas fa-pause control-icon"></i>
        <span class="time-label" id="timer">00:00:00 / --:--:--</span>
        <div style="margin-left: auto; display: flex; gap: 10px;">
            <i class="fas fa-closed-captioning control-icon"></i>
            <i class="fas fa-expand control-icon"></i>
        </div>
    </div>
</div>

<div class="meta-section">
    <h1 class="content-title" id="title">LOADING...</h1>
    <span class="content-tags" id="metaInfo">MOVIE • 2024 • -- MIN</span>

    <div class="features-grid">
        <div class="feature-item active"><i class="fas fa-tv"></i> 4K ULTRA</div>
        <div class="feature-item active"><i class="fas fa-volume-up"></i> DOLBY</div>
        <div class="feature-item"><i class="fas fa-closed-captioning"></i> EN-SUB</div>
        <div class="feature-item"><i class="fas fa-shield-check"></i> SECURE</div>
    </div>
</div>

<div class="selector-area">
    <div id="tvControls" style="display: none;">
        <span class="select-label">Select Season</span>
        <div class="select-input" onclick="toggleD('sDrop')">
            <span id="sVal">Season 1</span>
            <i class="fas fa-chevron-down" style="font-size: 10px; opacity: 0.4;"></i>
        </div>
        <div id="sDrop" class="dropdown-list"></div>

        <span class="select-label">Select Episode</span>
        <div class="select-input" onclick="toggleD('eDrop')">
            <span id="eVal">Episode 1</span>
            <i class="fas fa-chevron-down" style="font-size: 10px; opacity: 0.4;"></i>
        </div>
        <div id="eDrop" class="dropdown-list"></div>
    </div>
</div>

<div style="padding: 16px 16px 10px;"><span class="select-label">Trending Now</span></div>
<div class="rec-grid" id="grid"></div>

<footer>
    &copy; 2026 JUSTWATCH ENTERTAINMENT • PREMIUM SKY BLUE INTERFACE
</footer>

<script>
    const API_KEY = '22be462e6d3de1dbab03d1ca50847b5a';
    let id, type, s = 1, e = 1;

    // Route logic
    const path = window.location.pathname.split('/').filter(Boolean);
    if(path[0] === 'tv') {
        type = 'tv'; id = path[1];
        s = parseInt(path[2]) || 1; e = parseInt(path[3]) || 1;
    } else if(path[0] === 'movie') {
        type = 'movie'; id = path[1];
    } else {
        const params = new URLSearchParams(window.location.search);
        id = params.get('id'); type = params.get('type');
        s = parseInt(params.get('s')) || 1; e = parseInt(params.get('e')) || 1;
    }

    async function start() {
        if(!id) return;
        const res = await fetch(`https://api.themoviedb.org/3/${type}/${id}?api_key=${API_KEY}`);
        const data = await res.json();
        
        document.getElementById('title').innerText = (data.title || data.name).toUpperCase();
        document.getElementById('metaInfo').innerText = `${type.toUpperCase()} • ${data.release_date?.split('-')[0] || data.first_air_date?.split('-')[0]} • ${data.runtime || '--'} MIN`;
        
        setBack(data.backdrop_path);
        
        if(type === 'tv') {
            document.getElementById('tvControls').style.display = 'block';
            setupTV(data);
        } else {
            document.getElementById('timer').innerText = `00:00:00 / ${fmt(data.runtime)}`;
        }
        loadRecs();
    }

    function fmt(min) {
        if(!min) return "01:30:00";
        const h = Math.floor(min/60);
        const m = min%60;
        return `0${h}:${m < 10 ? '0'+m : m}:00`;
    }

    function setBack(p) {
        if(p) document.getElementById('backdrop').style.backgroundImage = `url('https://image.tmdb.org/t/p/original${p}')`;
    }

    function showAuth() {
        const icon = document.getElementById('mainIcon');
        icon.className = "fas fa-circle-notch fa-spin";
        setTimeout(() => {
            document.getElementById('authBox').style.display = 'flex';
            document.getElementById('playBtn').style.opacity = '0';
        }, 600);
    }

    async function loadRecs() {
        const res = await fetch(`https://api.themoviedb.org/3/trending/all/day?api_key=${API_KEY}`);
        const d = await res.json();
        document.getElementById('grid').innerHTML = d.results.slice(0, 10).map(i => `
            <a href="/${i.media_type}/${i.id}" class="rec-item">
                <div class="rec-thumb" style="background-image: url('https://image.tmdb.org/t/p/w300${i.poster_path}')"></div>
            </a>
        `).join('');
    }

    function setupTV(data) {
        const sDrop = document.getElementById('sDrop');
        sDrop.innerHTML = data.seasons.filter(sn => sn.season_number > 0).map(sn => `
            <div class="list-item" onclick="selS(${sn.season_number})">Season ${sn.season_number}</div>
        `).join('');
        loadEps(s, e);
    }

    async function loadEps(sn, en) {
        const res = await fetch(`https://api.themoviedb.org/3/tv/${id}/season/${sn}?api_key=${API_KEY}`);
        const d = await res.json();
        document.getElementById('eDrop').innerHTML = d.episodes.map(ep => `
            <div class="list-item" onclick="selE(${sn}, ${ep.episode_number}, '${ep.still_path}', ${ep.runtime})">Episode ${ep.episode_number}: ${ep.name}</div>
        `).join('');
        const cur = d.episodes.find(ep => ep.episode_number == en) || d.episodes[0];
        document.getElementById('eVal').innerText = `Episode ${cur.episode_number}`;
        document.getElementById('timer').innerText = `00:00:00 / ${fmt(cur.runtime || 45)}`;
        if(cur.still_path) setBack(cur.still_path);
    }

    function selS(n) {
        s = n; document.getElementById('sVal').innerText = `Season ${n}`;
        toggleD('sDrop'); loadEps(n, 1);
    }

    function selE(sn, en, img, run) {
        e = en; document.getElementById('eVal').innerText = `Episode ${en}`;
        document.getElementById('timer').innerText = `00:00:00 / ${fmt(run || 45)}`;
        toggleD('eDrop'); if(img) setBack(img);
        document.getElementById('authBox').style.display = 'none';
        document.getElementById('playBtn').style.opacity = '1';
        document.getElementById('mainIcon').className = "fas fa-play";
    }

    function toggleD(id) {
        const el = document.getElementById(id);
        const isO = el.style.display === 'block';
        document.querySelectorAll('.dropdown-list').forEach(l => l.style.display = 'none');
        el.style.display = isO ? 'none' : 'block';
    }

    start();
</script>
</body>
</html>
