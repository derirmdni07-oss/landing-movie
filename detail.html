<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JustWatch-TV — Premium 4K Streaming</title>
    <meta name="description" content="Watch the latest Movies and TV Series in Ultra HD. No subscription required.">

    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect x=%2210%22 y=%2220%22 width=%2280%22 height=%2260%22 rx=%2210%22 fill=%22%236d28d9%22/><path d=%22M40 35 L70 50 L40 65 Z%22 fill=%22white%22/></svg>">

    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&family=Bebas+Neue&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --bg: #05010a;
            --surface: #0f051a;
            --accent: #ff004c;
            --purple: #8b5cf6;
            --text: #ffffff;
            --text-dim: #94a3b8;
            --border: rgba(139, 92, 246, 0.15);
            --glow: rgba(255, 0, 76, 0.3);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        body { background-color: var(--bg); color: var(--text); font-family: 'Plus Jakarta Sans', sans-serif; overflow-x: hidden; line-height: 1.5; }

        /* Enhanced Header */
        header {
            background: rgba(5, 1, 10, 0.95);
            backdrop-filter: blur(25px);
            padding: 12px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--border);
            position: sticky; top: 0; z-index: 1000;
        }

        .logo-container { display: flex; align-items: center; gap: 10px; text-decoration: none; }
        .logo-box {
            position: relative; width: 34px; height: 34px;
            background: linear-gradient(135deg, var(--purple), var(--accent));
            border-radius: 10px; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 0 15px var(--glow);
        }
        .logo-text { 
            font-family: 'Bebas Neue', sans-serif; font-size: 1.8rem; letter-spacing: 1px;
            background: linear-gradient(to right, #fff, #ff004c);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            font-weight: normal;
        }
        .logo-text span { color: var(--purple); -webkit-text-fill-color: var(--purple); font-size: 1rem; vertical-align: middle; margin-left: -2px; }

        .home-btn { 
            color: white; background: rgba(255,255,255,0.08);
            width: 38px; height: 38px; border-radius: 12px; 
            display: flex; align-items: center; justify-content: center; 
            text-decoration: none; border: 1px solid var(--border);
        }

        /* Video Stage */
        .video-stage { width: 100%; background: #000; position: relative; overflow: hidden; }
        .fake-player {
            width: 100%;
            aspect-ratio: 16/9;
            background-size: cover;
            background-position: center;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }
        .fake-player::before {
            content: ''; position: absolute; inset: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1;
        }

        /* Minimalist Small Pop-up (Pas untuk HP) */
        .register-overlay {
            position: absolute; inset: 0;
            background: rgba(0,0,0,0.4); backdrop-filter: blur(4px);
            z-index: 20; display: none; 
            justify-content: center; align-items: center; padding: 10px;
        }
        .reg-box {
            background: rgba(15, 5, 26, 0.95); 
            border: 1px solid rgba(139, 92, 246, 0.5);
            padding: 18px; border-radius: 20px; 
            width: 85%; max-width: 260px; /* Ukuran Mini */
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
            text-align: center;
            animation: miniPop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        @keyframes miniPop { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        .reg-box h3 { font-size: 0.95rem; margin-bottom: 6px; color: #fff; font-weight: 800; letter-spacing: 0.5px; }
        .reg-box p { font-size: 0.7rem; color: var(--text-dim); margin-bottom: 15px; line-height: 1.4; }
        
        .cpa-link {
            display: block; width: 100%; background: linear-gradient(to right, var(--purple), var(--accent));
            color: white; text-decoration: none; padding: 10px; border-radius: 12px;
            font-weight: 800; font-size: 0.75rem; text-transform: uppercase;
            box-shadow: 0 4px 15px rgba(255, 0, 76, 0.3);
        }

        /* Minimal Controls */
        .fake-controls {
            position: absolute; bottom: 0; left: 0; right: 0;
            height: 35px; background: linear-gradient(transparent, rgba(0,0,0,0.9));
            z-index: 10; display: flex; align-items: center; padding: 0 12px;
            gap: 12px; font-size: 0.7rem;
        }
        .progress-bar { position: absolute; top: 0; left: 0; right: 0; height: 2px; background: rgba(255,255,255,0.15); }
        .progress-fill { width: 0%; height: 100%; background: var(--accent); }

        .play-trigger {
            position: relative; z-index: 5;
            width: 50px; height: 50px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1.5px solid rgba(255,255,255,0.4);
            border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            color: white; font-size: 1.2rem;
            transition: 0.3s;
        }

        /* Content Info */
        .content-info { padding: 18px 15px; }
        #headTitle { font-size: 1.3rem; font-weight: 800; color: white; margin-bottom: 15px; letter-spacing: -0.5px; }
        
        .toolbar { display: flex; gap: 8px; margin-bottom: 25px; }
        .btn-action {
            flex: 1; background: var(--surface); color: white; border: 1px solid var(--border);
            padding: 12px; border-radius: 14px; font-weight: 700; font-size: 0.75rem;
            display: flex; align-items: center; justify-content: center; gap: 8px;
        }
        .btn-action.primary { background: linear-gradient(to right, var(--purple), var(--accent)); border: none; }

        /* Selectors */
        .selection-container { padding: 0 15px; margin-bottom: 30px; }
        .label-text { font-size: 0.65rem; font-weight: 800; color: var(--text-dim); text-transform: uppercase; margin-bottom: 8px; display: block; letter-spacing: 1.2px; }
        .select-box {
            background: var(--surface); border: 1px solid var(--border);
            border-radius: 12px; padding: 14px;
            display: flex; align-items: center; justify-content: space-between;
            cursor: pointer; margin-bottom: 10px; font-size: 0.9rem;
        }
        .dropdown-content {
            background: var(--surface); border: 1px solid var(--border); border-radius: 12px;
            margin-top: -5px; margin-bottom: 10px; display: none; max-height: 220px; overflow-y: auto;
        }
        .dropdown-item { padding: 12px 15px; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 0.85rem; }

        /* Recommendations */
        .rec-section { margin-top: 10px; border-top: 1px solid var(--border); padding: 20px 15px; }
        .grid-5 { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; }
        .rec-card { text-decoration: none; color: white; }
        .rec-img { width: 100%; aspect-ratio: 2/3; border-radius: 6px; background-size: cover; background-position: center; border: 1px solid var(--border); }
        .rec-info { font-size: 0.55rem; font-weight: 600; text-align: center; margin-top: 6px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        footer { text-align: center; padding: 40px 15px; opacity: 0.5; font-size: 0.7rem; border-top: 1px solid var(--border); color: var(--text-dim); }
        .runtime-tag { font-size: 0.65rem; background: rgba(139, 92, 246, 0.2); padding: 3px 7px; border-radius: 6px; color: var(--purple); margin-left: auto; font-weight: 700; }
    </style>
</head>
<body>

<header>
    <a href="/" class="logo-container">
        <div class="logo-box"><i class="fas fa-play" style="font-size: 11px;"></i></div>
        <span class="logo-text">JUSTWATCH<span>-TV</span></span>
    </a>
    <a href="/" class="home-btn"><i class="fas fa-search" style="font-size: 14px;"></i></a>
</header>

<section class="video-stage">
    <div class="fake-player" id="backdropContainer" onclick="showRegister()">
        <div class="play-trigger" id="playIcon">
            <i class="fas fa-play" id="playSymbol" style="margin-left: 3px;"></i>
        </div>
        
        <!-- Smallest Mini Pop-up -->
        <div class="register-overlay" id="regOverlay" onclick="event.stopPropagation()">
            <div class="reg-box">
                <div style="width: 40px; height: 40px; background: rgba(255,0,76,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px;">
                    <i class="fas fa-shield-alt" style="font-size: 1.2rem; color: var(--accent);"></i>
                </div>
                <h3>VERIFIKASI</h3>
                <p>Silahkan daftar akun gratis untuk menonton dalam kualitas <b>Ultra HD</b>.</p>
                <a href="https://your-cpa-link.com" class="cpa-link">DAFTAR SEKARANG</a>
            </div>
        </div>

        <div class="fake-controls">
            <div class="progress-bar"><div class="progress-fill"></div></div>
            <i class="fas fa-play"></i>
            <span id="timerDisplay" style="font-weight: 700; font-family: 'Bebas Neue', sans-serif; letter-spacing: 1px;">00:00 / --:--</span>
            <div style="margin-left: auto; display: flex; gap: 12px; opacity: 0.7;">
                <i class="fas fa-closed-captioning"></i>
                <i class="fas fa-expand"></i>
            </div>
        </div>
    </div>
</section>

<div class="content-info">
    <h1 id="headTitle">MEMUAT...</h1>
    <div class="toolbar">
        <button class="btn-action primary" onclick="redirectToCPA()">
            <i class="fas fa-play"></i> <span>PUTAR</span>
        </button>
        <button class="btn-action" onclick="redirectToCPA()">
            <i class="fas fa-download"></i> <span>UNDUH</span>
        </button>
        <button class="btn-action" style="flex: 0.25;" onclick="shareMovie()">
            <i class="fas fa-share-alt"></i>
        </button>
    </div>
</div>

<main class="selection-container">
    <div id="tvControls" style="display:none;">
        <span class="label-text">Pilih Musim</span>
        <div class="select-box" onclick="toggleDrop('seasonDrop')">
            <span id="sLabel">Season 1</span>
            <i class="fas fa-chevron-down" style="font-size: 0.7rem; opacity: 0.4;"></i>
        </div>
        <div id="seasonDrop" class="dropdown-content"></div>

        <span class="label-text">Pilih Episode</span>
        <div class="select-box" onclick="toggleDrop('epDrop')">
            <span id="eLabel">Episode 1</span>
            <span class="runtime-tag" id="epRuntime">-- mnt</span>
        </div>
        <div id="epDrop" class="dropdown-content"></div>
    </div>
</main>

<section class="rec-section">
    <h2 class="label-text">Sedang Tren</h2>
    <div class="grid-5" id="recGrid"></div>
</section>

<footer>
    <p>&copy; 2026 JUSTWATCH-TV — Streaming Premium</p>
</footer>

<script>
    const API_KEY = '22be462e6d3de1dbab03d1ca50847b5a';
    const CPA_URL = 'https://your-cpa-link.com';
    let id, type, currentS = 1, currentE = 1, totalDuration = "00:00", seriesData;

    const path = window.location.pathname.split("/").filter(Boolean);
    if (path[0] === "tv") {
        type = "tv"; id = path[1];
        currentS = parseInt(path[2]) || 1; currentE = parseInt(path[3]) || 1;
    } else if (path[0] === "movie") {
        type = "movie"; id = path[1];
    } else {
        const params = new URLSearchParams(window.location.search);
        id = params.get('id'); type = params.get('type');
        currentS = parseInt(params.get('s')) || 1; currentE = parseInt(params.get('e')) || 1;
    }

    async function init() {
        if (!id || !type) return;
        try {
            const res = await fetch(`https://api.themoviedb.org/3/${type}/${id}?api_key=${API_KEY}&language=id-ID`);
            const data = await res.json();
            seriesData = data;

            document.getElementById('headTitle').innerText = (data.title || data.name).toUpperCase();
            
            if(type === 'movie') {
                totalDuration = formatTime(data.runtime || 120);
                updateTimer("00:00", totalDuration);
            }

            updateBackdrop(data.backdrop_path);
            if (type === 'tv') {
                document.getElementById('tvControls').style.display = 'block';
                renderSeasons();
                loadEpisodes(currentS, currentE);
            }
            loadRecommendations();
        } catch (e) { console.error(e); }
    }

    function formatTime(minutes) {
        const h = Math.floor(minutes / 60);
        const m = minutes % 60;
        return `${h > 0 ? h + ":" : ""}${m < 10 && h > 0 ? "0" + m : m}:00`;
    }

    function updateTimer(current, total) {
        document.getElementById('timerDisplay').innerText = `${current} / ${total}`;
    }

    function updateBackdrop(path) {
        if (!path) return;
        document.getElementById('backdropContainer').style.backgroundImage = `url('https://image.tmdb.org/t/p/w780${path}')`;
    }

    function showRegister() {
        document.getElementById('playSymbol').className = "fas fa-spinner fa-spin";
        setTimeout(() => {
            document.getElementById('regOverlay').style.display = 'flex';
            document.getElementById('playIcon').style.display = 'none';
        }, 600);
    }

    function redirectToCPA() { window.location.href = CPA_URL; }

    async function loadRecommendations() {
        const grid = document.getElementById('recGrid');
        const res = await fetch(`https://api.themoviedb.org/3/trending/all/week?api_key=${API_KEY}`);
        const data = await res.json();
        grid.innerHTML = data.results.slice(0, 5).map(item => `
            <a href="/${item.media_type}/${item.id}" class="rec-card">
                <div class="rec-img" style="background-image: url('https://image.tmdb.org/t/p/w200${item.poster_path}')"></div>
                <div class="rec-info">${item.name || item.title}</div>
            </a>
        `).join('');
    }

    function renderSeasons() {
        const drop = document.getElementById('seasonDrop');
        drop.innerHTML = seriesData.seasons.filter(s => s.season_number > 0).map(s => `
            <div class="dropdown-item" onclick="selectSeason(${s.season_number})">Season ${s.season_number}</div>
        `).join('');
        document.getElementById('sLabel').innerText = `Season ${currentS}`;
    }

    function selectSeason(n) {
        currentS = n;
        document.getElementById('sLabel').innerText = `Season ${n}`;
        toggleDrop('seasonDrop');
        loadEpisodes(n, 1);
    }

    async function loadEpisodes(sNum, eNum = 1) {
        const drop = document.getElementById('epDrop');
        const res = await fetch(`https://api.themoviedb.org/3/tv/${id}/season/${sNum}?api_key=${API_KEY}`);
        const data = await res.json();
        const ep = data.episodes.find(ep => ep.episode_number == eNum) || data.episodes[0];
        
        updateBackdrop(ep.still_path || seriesData.backdrop_path);
        document.getElementById('epRuntime').innerText = (ep.runtime || 45) + ' mnt';
        totalDuration = formatTime(ep.runtime || 45);
        updateTimer("00:00", totalDuration);

        document.getElementById('regOverlay').style.display = 'none';
        document.getElementById('playIcon').style.display = 'flex';
        document.getElementById('playSymbol').className = "fas fa-play";

        drop.innerHTML = data.episodes.map(e => `
            <div class="dropdown-item" onclick="selectEpisode(${sNum}, ${e.episode_number}, '${e.still_path}', ${e.runtime})">
                Ep ${e.episode_number}: ${e.name}
            </div>
        `).join('');
        document.getElementById('eLabel').innerText = `Episode ${ep.episode_number}`;
    }

    function selectEpisode(s, e, still, runtime) {
        currentE = e;
        document.getElementById('eLabel').innerText = `Episode ${e}`;
        document.getElementById('epRuntime').innerText = (runtime || 45) + ' mnt';
        totalDuration = formatTime(runtime || 45);
        updateTimer("00:00", totalDuration);
        toggleDrop('epDrop');
        updateBackdrop(still !== 'null' ? still : seriesData.backdrop_path);
        document.getElementById('regOverlay').style.display = 'none';
        document.getElementById('playIcon').style.display = 'flex';
        document.getElementById('playSymbol').className = "fas fa-play";
    }

    function toggleDrop(id) {
        const el = document.getElementById(id);
        const isShow = el.style.display === 'block';
        document.querySelectorAll('.dropdown-content').forEach(d => d.style.display = 'none');
        el.style.display = isShow ? 'none' : 'block';
    }

    function shareMovie() {
        if(navigator.share) navigator.share({ title: document.title, url: window.location.href });
    }

    init();
</script>
</body>
</html>
